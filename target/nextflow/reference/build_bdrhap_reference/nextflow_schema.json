{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "build_bdrhap_reference",
  "description": "The Reference Files Generator creates an archive containing Genome Index\nand Transcriptome annotation files needed for the BD Rhapsody Sequencing\nAnalysis Pipeline. The app takes as input one or more FASTA and GTF files\nand produces a compressed archive in the form of a tar.gz file. The \narchive contains:\n  \n- STAR index\n- Filtered GTF file\n",
  "type": "object",
  "$defs": {
    "Dataset input": {
      "title": "Dataset input",
      "type": "object",
      "description": "Dataset input using nf-tower \"dataset\" or \"data explorer\". Allows for the input of multiple         parameter sets to initialise a Nextflow channel.",
      "properties": {
        "param_list": {
          "description": "Dataset input can either be a list of maps, a csv file, a json file, a yaml file, or simply a yaml                 blob. The names of the input fields (e.g. csv columns, json keys) need to be an exact match with the workflow input parameters.",
          "default": "",
          "format": "file-path",
          "mimetype": "text/csv",
          "pattern": "^\\S+\\.csv$"
        }
      }
    },
    "inputs": {
      "title": "Inputs",
      "type": "object",
      "description": "No description",
      "required": [
        "genome_fasta",
        "gtf"
      ],
      "properties": {
        "genome_fasta": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "format": "path",
          "exists": true,
          "description": "Reference genome file in FASTA or FASTA",
          "help_text": "Type: `file`, multiple: `True`, required, example: `genome_sequence.fa.gz`. "
        },
        "gtf": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "format": "path",
          "exists": true,
          "description": "File path to the transcript annotation files in GTF or GTF",
          "help_text": "Type: `file`, multiple: `True`, required, example: `transcriptome_annotation.gtf.gz`. "
        },
        "extra_sequences": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "format": "path",
          "description": "File path to additional sequences in FASTA format to use when building the STAR index",
          "help_text": "Type: `file`, multiple: `True`. "
        }
      }
    },
    "outputs": {
      "title": "Outputs",
      "type": "object",
      "description": "No description",
      "required": [
        "reference_archive"
      ],
      "properties": {
        "reference_archive": {
          "type": "string",
          "format": "path",
          "exists": true,
          "description": "A Compressed archive containing the Reference Genome Index and annotation GTF files",
          "help_text": "Type: `file`, multiple: `False`, required, default: `$id.$key.reference_archive.gz`, example: `reference.tar.gz`. ",
          "default": "$id.$key.reference_archive.gz"
        }
      }
    },
    "arguments": {
      "title": "Arguments",
      "type": "object",
      "description": "No description",
      "required": [],
      "properties": {
        "mitochondrial_contigs": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Names of the Mitochondrial contigs in the provided Reference Genome",
          "help_text": "Type: `string`, multiple: `True`, default: `chrM;chrMT;M;MT`. ",
          "default": "chrM;chrMT;M;MT"
        },
        "filtering_off": {
          "type": "boolean",
          "description": "By default the input Transcript Annotation files are filtered based on the gene_type/gene_biotype attribute",
          "help_text": "Type: `boolean_true`, multiple: `False`, default: `false`. ",
          "default": false
        },
        "wta_only_index": {
          "type": "boolean",
          "description": "Build a WTA only index, otherwise builds a WTA + ATAC index",
          "help_text": "Type: `boolean_true`, multiple: `False`, default: `false`. ",
          "default": false
        },
        "extra_star_params": {
          "type": "string",
          "description": "Additional parameters to pass to STAR when building the genome index",
          "help_text": "Type: `string`, multiple: `False`, example: `--limitGenomeGenerateRAM 48000 --genomeSAindexNbases 11`. "
        }
      }
    },
    "nextflow input-output arguments": {
      "title": "Nextflow input-output arguments",
      "type": "object",
      "description": "Input/output parameters for Nextflow itself. Please note that both publishDir and publish_dir are supported but at least one has to be configured.",
      "required": [],
      "properties": {
        "publish_dir": {
          "type": "string",
          "description": "Path to an output directory",
          "help_text": "Type: `string`, multiple: `False`, required, example: `output/`. "
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/definitions/inputs"
    },
    {
      "$ref": "#/definitions/outputs"
    },
    {
      "$ref": "#/definitions/arguments"
    },
    {
      "$ref": "#/definitions/nextflow input-output arguments"
    }
  ]
}
