name: tiledb_healthcheck
namespace: query
scope: "public"
description: |
  Checks if a provided location can be queried as a TileDB-SOMA database.
authors:
  - __merge__: /src/authors/dries_schaumont.yaml
    roles: [ author, maintainer ]
argument_groups:
  - name: Input database
    description: "Open a TileDB SOMA database by URI."
    arguments:
      - name: "--input_uri"
        type: string
        description: "If specified, a URI containing the TileDB-SOMA objects."
        required: true
        example: "s3://bucket/path"
      - name: "--s3_region"
        description: |
          Region where the TileDB-SOMA database is hosted.
        type: string
        required: true
resources:
  - type: python_script
    path: script.py
  - path: /src/utils/setup_logger.py
test_resources:
  - type: python_script
    path: test.py
engines:
  - type: docker
    image: python:3.12
    setup:
      - type: python
        packages:
          - tiledbsoma
    test_setup:
      - type: python
        __merge__: [ /src/base/requirements/viashpy.yaml, .]
runners:
  - type: executable
  - type: nextflow
    directives:
      label: [highmem, midcpu]