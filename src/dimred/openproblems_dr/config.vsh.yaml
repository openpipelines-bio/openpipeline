name: "openproblems_dr"
namespace: "dimred"
argument_groups:
  - name: "Inputs"
    arguments:
      - name: "--input"
        required: true
        type: file
        description: Path to the sample.
        example: dataset.h5mu

      - name: "--input_modality"
        type: string
        default: "rna"
        required: false

      - name: "--input_layer_counts"
        type: string
        description: In which layer to find the raw counts. If not provided, the raw counts are assumed to be in the .X object.
        required: false

      - name: "--input_layer_normalized"
        type: string
        description: In which layer to find the log normalized counts. If not provided, the raw counts are assumed to be in the .X object.
        required: false
        default: "log_normalized"
      
      - name: "--input_var_hvg_score"
        type: string
        description: In which obsm to find the HVG scores. If not provided, the HVG scores are not passed.
        required: false

  - name: Method settings
    arguments:
      - name: "--method_id"
        description: ID of the method to use.
        type: string
        required: true
        choices: [
          densmap,
          diffusion_map,
          ivis,
          lmds,
          neuralee,
          pca,
          phate,
          pymde,
          simlr,
          tsne,
          umap
        ]
  - name: "Outputs"
    arguments:
      - name: "--output"
        type: file
        required: true
        direction: output
        description: Destination path to the output.
        example: output.h5mu

      - name: "--output_obsm_key"
        description: Key in the .obsm object to use as input. If not provided, "X_{method_id}" is used.
        type: string
        required: false
dependencies:
  - name: dimred/openproblems_dr_h5mu_to_h5ad
  - name: dimred/openproblems_dr_h5ad_to_h5mu
  - name: methods/densmap
    repository: openproblems_task_dimensionality_reduction
  - name: methods/diffusion_map
    repository: openproblems_task_dimensionality_reduction
  - name: methods/ivis
    repository: openproblems_task_dimensionality_reduction
  - name: methods/lmds
    repository: openproblems_task_dimensionality_reduction
  - name: methods/neuralee
    repository: openproblems_task_dimensionality_reduction
  - name: methods/pca
    repository: openproblems_task_dimensionality_reduction
  - name: methods/phate
    repository: openproblems_task_dimensionality_reduction
  - name: methods/pymde
    repository: openproblems_task_dimensionality_reduction
  - name: methods/simlr
    repository: openproblems_task_dimensionality_reduction
  - name: methods/tsne
    repository: openproblems_task_dimensionality_reduction
  - name: methods/umap
    repository: openproblems_task_dimensionality_reduction
resources:
  - type: nextflow_script
    path: main.nf
    entrypoint: run_wf
runners:
  - type: nextflow